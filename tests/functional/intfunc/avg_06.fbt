{
'id': 'functional.intfunc.avg_06',
'qmid': 'functional.intfunc.avg.avg_06',
'tracker_id': '',
'title': 'AVG - Integer OverFlow',
'description': """Dependencies:
CREATE DATABASE
CREATE TABLE
INSERT
SELECT""",
'versions': [
{
 'firebird_version': '1.0',
 'platform': 'All',
 'init_script': """CREATE TABLE test( id INTEGER NOT NULL);
INSERT INTO test VALUES(2100000000);
INSERT INTO test VALUES(2100000000);
INSERT INTO test VALUES(2100000000);
INSERT INTO test VALUES(2100000000);""",
 'test_type': 'ISQL',
 'test_script': 'SELECT AVG(2100000000*id) FROM test;',
 'expected_stdout': """                  AVG
=====================""",
 'expected_stderr': """Statement failed, SQLCODE = -901

Integer overflow.  The result of an integer operation caused the most significant bit of the result to carry."""
},
{
 'firebird_version': '2.5',
 'platform': 'All',
 'init_script': """CREATE TABLE test( id INTEGER NOT NULL);
INSERT INTO test VALUES(2100000000);
INSERT INTO test VALUES(2100000000);
INSERT INTO test VALUES(2100000000);
INSERT INTO test VALUES(2100000000);""",
 'test_type': 'ISQL',
 'test_script': 'SELECT AVG(2100000000*id) FROM test;',
 'expected_stdout': """                  AVG
=====================""",
 'expected_stderr': """Statement failed, SQLSTATE = 22003

Integer overflow.  The result of an integer operation caused the most significant bit of the result to carry."""
}
]
}
