{
'id': 'bugs.core_1006',
'qmid': 'bugs.core_1006',
'tracker_id': 'CORE-1006',
'title': 'AV at rollback and \ or garbage collection if updated table have expression index with SELECT in it',
'description': 'This test takes the server down.',
'versions': [
{
 'firebird_version': '2.0.1',
 'platform': 'All',
 'database': 'Restore',
 'backup_file': 'core1006.fbk',
 'test_type': 'ISQL',
 'test_script': """set term ^;

EXECUTE BLOCK
AS
  DECLARE F1 INT;
  DECLARE F2 INT;
BEGIN
  FOR SELECT T1.ID, T2.ID
    FROM TABLE1 T1, TABLE2 T2
    WHERE T1.ID = T2.ID
    INTO :F1, :F2
    AS CURSOR CUR
  DO
    UPDATE TABLE1 SET NAME = :F1 + :F2 WHERE CURRENT OF CUR;
END^

set term ;^

rollback;
"""
}
]
}
