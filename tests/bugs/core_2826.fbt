{
'id': 'bugs.core_2826',
'qmid': None,
'tracker_id': 'CORE-2816',
'title': 'oin condition fails for UTF-8 databases.',
'description': '',
'min_versions': '2.1.4',
'versions': [
{
 'firebird_version': '2.1.4',
 'platform': 'All',
 'database_character_set': 'UTF8',
 'connection_character_set': 'UTF8',
 'page_size': '4096',
 'init_script': """CREATE COLLATION UNICODE_NOPAD FOR UTF8 FROM UNICODE NO PAD;
COMMIT;
RECREATE TABLE tst1_nopad (
  k1 VARCHAR(3) COLLATE UNICODE_NOPAD,
  k2 INT,
  k3 CHAR(1) COLLATE UNICODE_NOPAD,
  PRIMARY KEY (k1, k2, k3)
);
COMMIT;
INSERT INTO tst1_nopad VALUES ('AP', 123, ' ');
INSERT INTO tst1_nopad VALUES ('HEL', 666, 'V');
COMMIT;
""",
 'test_type': 'ISQL',
 'test_script': """SELECT t1.*
  FROM tst1_nopad t1
 WHERE t1.k1 = 'AP'
   AND t1.k2 = 123
   AND t1.k3 = ' '
PLAN (T1 NATURAL);
SELECT t1.*
  FROM tst1_nopad t1
 WHERE t1.k1 = 'AP'
   AND t1.k2 = 123
   AND t1.k3 = ' ';
SHOW TABLE tst1_nopad;""",
 'expected_stdout': """Database:  localhost:C:\fbtest2\tmp\bugs.core_2826.fdb, User: SYSDBA
SQL> CON> CON> CON> CON> CON>
K1                     K2 K3
============ ============ ======
AP                    123

SQL> CON> CON> CON> CON>
K1                     K2 K3
============ ============ ======
AP                    123

SQL> K1                              VARCHAR(3) CHARACTER SET UTF8 Not Null
                                 COLLATE UNICODE_NOPAD
K2                              INTEGER Not Null
K3                              CHAR(1) CHARACTER SET UTF8 Not Null
                                 COLLATE UNICODE_NOPAD
CONSTRAINT INTEG_1:
  Primary key (K1, K2, K3)
SQL>"""
}
]
}
