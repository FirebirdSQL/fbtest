{
'id': 'bugs.core_1089',
'qmid': None,
'tracker_id': 'CORE-1089',
'title': 'Wrong ordering with views, distinct, left join and order by',
'description': '',
'min_versions': '2.0.6',
'versions': [
{
 'firebird_version': '2.0.6',
 'platform': 'All',
 'page_size': '4096',
 'init_script': """CREATE TABLE FAT
   (
     IDXXFAT VARCHAR(26) NOT NULL,
     PROGFAT INTEGER,
     IDXXCCB VARCHAR(20),
     NDONFAT INTEGER,
   CONSTRAINT PK$_FAT PRIMARY KEY (IDXXFAT)
   );

COMMIT;

   INSERT INTO FAT (IDXXFAT,PROGFAT,IDXXCCB,NDONFAT) values
('2007.1',1,'Y',1002);
   INSERT INTO FAT (IDXXFAT,PROGFAT,IDXXCCB,NDONFAT) values
('2007.2',2,'X',1001);

COMMIT;

   CREATE TABLE SCA
   (
     IDXXSCA VARCHAR(16) NOT NULL,
     PROGSCA INTEGER,
     IDXXFAT VARCHAR(26),
   CONSTRAINT PK$_SCA PRIMARY KEY (IDXXSCA)
   );

COMMIT;

   INSERT INTO SCA (IDXXSCA,PROGSCA,IDXXFAT) values ('2007.4',4,'2007.1');
   INSERT INTO SCA (IDXXSCA,PROGSCA,IDXXFAT) values ('2007.3',3,'2007.1');
   INSERT INTO SCA (IDXXSCA,PROGSCA,IDXXFAT) values ('2007.2',2,'2007.2');
   INSERT INTO SCA (IDXXSCA,PROGSCA,IDXXFAT) values ('2007.1',1,'2007.2');

COMMIT;

   CREATE VIEW VW$_SCA (
     IDXXSCA,
     PROGSCA,
     IDXXFAT,
     IDXXCCB,
     NDONFAT
   ) AS
   SELECT DISTINCT
   SCA.IDXXSCA,
   SCA.PROGSCA,
   SCA.IDXXFAT,
   FAT.IDXXCCB,
   FAT.NDONFAT
   FROM
   SCA LEFT JOIN FAT ON SCA.IDXXFAT=FAT.IDXXFAT;

COMMIT;
""",
 'test_type': 'ISQL',
 'test_script': """select * from vw$_sca order by 2 desc;
""",
 'expected_stdout': """
IDXXSCA               PROGSCA IDXXFAT                    IDXXCCB                   NDONFAT
================ ============ ========================== ==================== ============
2007.4                      4 2007.1                     Y                            1002
2007.3                      3 2007.1                     Y                            1002
2007.2                      2 2007.2                     X                            1001
2007.1                      1 2007.2                     X                            1001

"""
}
]
}
